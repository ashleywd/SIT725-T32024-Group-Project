<% layout('layout') -%>
<div class="container">
    <div class="row">
        <div class="col s12">
            <h3>My Posts</h3>
            <p>View and manage your babysitting activity</p>
            
            <div class="row">
                <div class="col s12">
                    <a href="/dashboard" class="btn waves-effect waves-light blue lighten-2">
                        <i class="material-icons left">arrow_back</i>
                        Back to Dashboard
                    </a>
                </div>
            </div>

            <!-- Loading indicator -->
            <div id="loadingIndicator" class="center-align" style="display: none;">
                <div class="preloader-wrapper big active">
                    <div class="spinner-layer spinner-blue">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div>
                        <div class="gap-patch">
                            <div class="circle"></div>
                        </div>
                        <div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Container -->
            <div id="errorContainer" class="col s12" style="display: none;">
                <div class="card-panel red lighten-4 red-text text-darken-4">
                    <span id="errorMessage"></span>
                </div>
            </div>

            <!-- Posts Sections -->
            <div class="section">
                <h5>
                    <i class="material-icons left">create</i>
                    My Created Posts
                </h5>
                <div class="row" id="myCreatedPosts"></div>
            </div>

            <div class="divider"></div>

            <div class="section">
                <h5>
                    <i class="material-icons left">check_circle</i>
                    Posts I've Accepted
                </h5>
                <div class="row" id="myAcceptedPosts"></div>
            </div>

            <div class="divider"></div>

            <div class="section">
                <h5>
                    <i class="material-icons left">schedule</i>
                    My Pending Offers
                </h5>
                <div class="row" id="myPendingOffers"></div>
            </div>
        </div>
    </div>
</div>

<!-- Edit Post Modal -->
<div id="editPostModal" class="modal">
    <div class="modal-content">
        <h4>Edit Post</h4>
        <form id="editPostForm">
            <!-- Post Type -->
            <div class="row">
                <div class="input-field col s12">
                    <select id="editType" name="type" required>
                        <option value="offer">Offering Babysitting</option>
                        <option value="request">Requesting Babysitter</option>
                    </select>
                    <label>Post Type</label>
                </div>
            </div>

            <!-- Hours Needed -->
            <div class="row">
                <div class="input-field col s12">
                    <input id="editHoursNeeded" name="hoursNeeded" type="number" min="1" step="0.5" required />
                    <label for="editHoursNeeded">Hours Needed</label>
                    <span class="helper-text">Enter number of hours (minimum 1 hour)</span>
                </div>
            </div>

            <!-- Date and Time -->
            <div class="row">
                <div class="input-field col s12">
                    <input type="datetime-local" id="editDateTime" name="dateTime" required />
                    <label for="editDateTime" class="active">Date and Time</label>
                </div>
            </div>

            <!-- Description -->
            <div class="row">
                <div class="input-field col s12">
                    <textarea id="editDescription" name="description" class="materialize-textarea" required></textarea>
                    <label for="editDescription">Description</label>
                    <span class="helper-text">Please provide details about your babysitting needs or services</span>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="row">
                <div class="col s12 center-align">
                    <button class="btn waves-effect waves-light" type="submit">
                        Save Changes
                        <i class="material-icons right">save</i>
                    </button>
                    <button class="btn waves-effect waves-light red modal-close" type="button">
                        Cancel
                        <i class="material-icons right">close</i>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Response Modal -->
<div id="responseModal" class="modal">
    <div class="modal-content">
        <h4 id="responseModalTitle">Update Status</h4>
        <div class="row">
            <div class="input-field col s12">
                <textarea id="responseMessage" class="materialize-textarea" required></textarea>
                <label for="responseMessage">Add a message</label>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn waves-effect waves-light" id="sendResponseButton">
            Send
            <i class="material-icons right">send</i>
        </button>
        <button class="btn waves-effect waves-light red modal-close">
            Cancel
            <i class="material-icons right">close</i>
        </button>
    </div>
</div>