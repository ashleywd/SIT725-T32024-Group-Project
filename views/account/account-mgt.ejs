<div>
    <h2>Account Management</h2>

    <!-- View Account Details -->
    <div id="accountDetails">
        <h4>Account Details:</h4>
        <p><strong>Name:</strong> <span id="accountName"></span></p>
        <p><strong>Email:</strong> <span id="accountEmail"></span></p>
        <p><strong>Points:</strong> <span id="accountPoints"></span></p>
    </div>

    <!-- Update Account Details -->
    <h4>Update Account</h4>
    <form id="updateForm">
        <input type="text" name="name" placeholder="New Name" />
        <input type="email" name="email" placeholder="New Email" />
        <button type="submit">Update</button>
    </form>

    <!-- Delete Account -->
    <button id="deleteAccountBtn" style="color: red;">Delete Account</button>
</div>

<script>
    // Fetch Account Details
    async function fetchAccountDetails() {
        const response = await fetch('/account');
        const data = await response.json();
        document.getElementById('accountName').innerText = data.name;
        document.getElementById('accountEmail').innerText = data.email;
        document.getElementById('accountPoints').innerText = data.points;
    }

    // Update Account
    document.getElementById('updateForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const body = JSON.stringify(Object.fromEntries(formData));
        const response = await fetch('/account', { method: 'PUT', body, headers: { 'Content-Type': 'application/json' }});
        const result = await response.json();
        alert(result.message);
        fetchAccountDetails();
    });

    // Delete Account
    document.getElementById('deleteAccountBtn').addEventListener('click', async () => {
        const response = await fetch('/account', { method: 'DELETE' });
        const result = await response.json();
        alert(result.message);
        window.location.href = '/login'; // Redirect to login page
    });

    // Load initial data
    fetchAccountDetails();
</script>
